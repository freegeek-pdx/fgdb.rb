<h1>List of volunteer email addresses <%= @conditions ? @conditions.to_s : "" %></h1>

<% form_tag do %>
<!-- 
<%= check_box_tag 'include_comma', "1", @include_comma %><%= label_tag 'include_comma' %><br />
<%= check_box_tag 'show_email', "1", @show_email %><%= label_tag 'show_email' %><br />
<%= check_box_tag 'hide_full_name', "1", @hide_full_name %><%= label_tag 'hide_full_name' %><br />
<%= check_box_tag 'include_first_name', "1", @include_first_name %><%= label_tag 'include_first_name' %><br />
<%= check_box_tag 'include_last_volunteer_date', "1", @include_last_volunteer_date %><%= label_tag 'include_last_volunteer_date' %><br />
<%= check_box_tag 'include_last_donated_date', "1", @include_last_donated_date %><%= label_tag 'include_last_donated_date' %><br />
<%= check_box_tag 'include_last_donated_contribution_only_date', "1", @include_last_donated_contribution_only_date %><%= label_tag 'include_last_donated_contribution_only_date' %><br />
<%= check_box_tag 'include_last_donated_gizmos_only_date', "1", @include_last_donated_gizmos_only_date %><%= label_tag 'include_last_donated_gizmos_only_date' %><br />
-->
<%= conditions_html("conditions", ['contact_type']) %>
<!-- , 'created_at', 'volunteered_hours_in_days', 'last_volunteer_date', 'organization', 'last_donated_date', 'last_donated_gizmos_only_date', 'last_donated_contribution_only_date' -->
<%= submit_tag 'View Email List' %>
<% end %>


<% if @contacts %>
<%= link_to "Download as CSV", params.merge({:action => "email_list_csv"}) %>
<h3>Matching contacts:</h3>
<% found = []
   for i in @contacts;
     v = [i.first_name, i.surname, i.mailing_list_email]
     found << v;
   end %>
<table width="100%" class="awesome">
  <tr>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
  </tr>
  <% for i in found %>
  <%= ("<tr>" + i.map{|x| "<td>" + x.to_s + "</td>"}.join("") + "</tr>") %>
  <% end %>
</table>

<% end %>
